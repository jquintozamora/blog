<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width"><title>SharePoint 2013 Client Side Rendering: Register Templates Overrides in Detail | José Quinto</title><meta name="description" content="SharePoint 2013 Client Side Rendering: Register Templates Overrides in Detail"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"><meta property="og:image" content="https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/featured.jpg"><meta name="twitter:image" content="https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/featured.jpg"><meta property="fb:app_id" content="155567495101835"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/" property="og:url"><meta name="twitter:title" content="SharePoint 2013 Client Side Rendering: Register Templates Overrides in Detail | José Quinto" property="og:title"><meta name="twitter:site" content="@jquintozamora"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/"><meta property="og:title" content="SharePoint 2013 Client Side Rendering: Register Templates Overrides in Detail | José Quinto"><link rel="canonical" href="https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/"><link rel="author" href="https://plus.google.com/u/0/108403117712061507579"><link rel="alternate" type="application/rss+xml" title="Jose Quinto" href="https://blog.josequinto.com/feed.rss"><meta name="theme-color" content="#ffffff"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.1"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.js" defer></script><script>var GLOBAL = { 
  root: '/',
  algolia: {"appId":"C7MOFESP3V","apiKey":"cdc4a9b7af864c710f2d3da5caf59eec","indexName":"dev_JQBLOG","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><div id="bodyWrapper"><div id="content-outer"><div id="top-container" style="background-image: url(/background.svg)"><div id="page-header"><span class="pull-left"> <a class="brand" href="/"><img class="brand-image" src="/jose-quinto.png"><div class="brand-name">José Quinto</div></a></span><i class="fa fa-share toggle-social" aria-hidden="true"></i><div class="socialicons" id="header-social-icons"><a class="social-icon" href="https://twitter.com/jquintozamora" target="_blank" rel="noopener"><i class="fa fa-twitter"></i></a><a class="social-icon" href="https://github.com/jquintozamora" target="_blank" rel="noopener"><i class="fa fa-github"></i></a><a class="social-icon" href="https://codepen.io/jquintozamora" target="_blank" rel="noopener"><i class="fa fa-codepen"></i></a><a class="social-icon" href="https://www.linkedin.com/in/jquintozamora" target="_blank" rel="noopener"><i class="fa fa-linkedin"></i></a><a class="social-icon" href="https://stackoverflow.com/users/5015774/jos%C3%A9-quinto-zamora?tab=profile" target="_blank" rel="noopener"><i class="fa fa-stack-overflow"></i></a><a class="social-icon" href="https://blog.josequinto.com/feed.rss" target="_blank" rel="noopener"><i class="fa fa-rss"></i></a></div><a class="social-icon search"><i class="fa fa-search"></i></a><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Search posts:</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/about.html">About</a></span></div><div id="post-info"><div id="post-title">SharePoint 2013 Client Side Rendering: Register Templates Overrides in Detail</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-01-14</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/taxonomy/Article/">Article</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/taxonomy/Article/Concept-Explained/">Concept-Explained</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/"></span></a></div></div></div><div class="layout" id="content-inner"><section class="articlePostContainer"><nav class="sidebar-toc"><div class="sidebar-toc__title">Contents</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSR-and-clienttemplates-js"><span class="toc-number">2.</span> <span class="toc-text">CSR and clienttemplates.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Inside-clienttemplates-js"><span class="toc-number">3.</span> <span class="toc-text">Inside clienttemplates.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Overriding-CSR-Templates"><span class="toc-number">4.</span> <span class="toc-text">Overriding CSR Templates</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RenderContext-object"><span class="toc-number">4.1.</span> <span class="toc-text">RenderContext object</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SharePoint-OOTB-Template-Overrides"><span class="toc-number">5.</span> <span class="toc-text">SharePoint OOTB Template Overrides</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">6.</span> <span class="toc-text">Conclusion</span></a></li></ol></div></nav><section class="postArticle"><article id="post"><div class="post-featuredImage"><img src="featured.jpg" width="auto" height="auto"></div><div id="post-content"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p><strong>SharePoint 2013 Client Side Rendering (CSR)</strong> is used for defining a custom rendering in list views and list forms. That also apply to Office 365. You can see a <a href="http://www.codeproject.com/Articles/620110/SharePoint-Client-Side-Rendering-List-Views" target="_blank" rel="noopener">good article about how CSR works</a>.</p>
<blockquote>
<p>Note that JSLink and CSR are different things:</p>
<ul>
<li><strong>CSR</strong>: is a JavaScript framework used in SharePoint 2013 as a technique for rendering data (replacing XSLT).</li>
<li><strong>JSLink</strong>: is a way to attach a JavaScript file to a SharePoint Object. (JSLink attached to SPView could implement CSR or not).</li>
</ul>
</blockquote>
<p>This post / article provides a <strong>detailed </strong>explanation <strong>about how works CSR internally</strong> in terms of overriding current templates and register out custom ones.</p>
<h2 id="CSR-and-clienttemplates-js"><a href="#CSR-and-clienttemplates-js" class="headerlink" title="CSR and clienttemplates.js"></a>CSR and clienttemplates.js</h2><p>In SharePoint 2013 there are a <strong>lot of JavaScript</strong> files intended to <strong>improve the User Experience</strong>, for example, in the picture we can see some of them in a normal page load. We remarks <strong>clienttemplates.js</strong> as a <strong>Client Side Rendering framework</strong> <strong>core</strong> file, which is a SharePoint 2013 / SharePoint Online asset intended to implement all <strong>JavaScript logic</strong> of CSR.</p>
<p>By default in SharePoint 2013 and Office 365 (Jan 2015), CSR core file is always loaded as it is shown in the picture:</p>
<p><img src="./image-1.png" alt="sharepoint client side rendering"></p>
<p>For instance, if we use OOTB Team Site template in <strong>Office 365</strong>, we could se how clienttemplates.js is loaded as a CSR core. But, what is also interesting is sp.ui.tileview.js file, which uses <strong>RegisterTemplateOverrides</strong> function to define special presentation for a view of Promoted Links List.</p>
<p><img src="./image-2.png" alt="sharepoint client side rendering and clienttemplates.js"></p>
<h2 id="Inside-clienttemplates-js"><a href="#Inside-clienttemplates-js" class="headerlink" title="Inside clienttemplates.js"></a>Inside clienttemplates.js</h2><p>As we are very curious, we should like to know what is happening inside clienttemplates.js. To be honest, there is a lot of stuff to investigate. We can see the first lines here:</p>
<p><img src="./image-3.png" alt="clienttemplates.js"></p>
<p>Let’s do some review over the most important functions and “classes”:</p>
<ul>
<li><code>$_global_clienttemplates</code>: wrapper that contains all objects and functions needed for CSR. It is called to be executed at the end of clienttemplates.js file.</li>
<li><code>SPClientRenderer</code>: JavaScript “class” intended to define all base or core functions used in the rendering framework. Let’s see few Important functions:</li>
<li><code>SPClientRenderer.ReplaceUrlTokens(tokenUrl)</code>: replace typical tokes like that ~sitecollection with the right urls.</li>
<li><code>SPClientRenderer.Render(node, renderCtx)</code>: Render core function that includes OnPreRender, RenderCore and OnPostRender.
  <img src="./image-4.png" alt="SPClientRenderer.Render "></li>
<li><code>SPClientRenderer.RenderCore(renderCtx)</code>: For every different render scope (View, Header, Body, Footer, Groups, Items and Fields), this function defines a different template. The advantage of this is we could override only one render scope if we need to implement custom solutions using CSR. The function <code>ResolveTemplate</code> will choose the right template to implement: OOTB or Custom one. We will see later how to override custom templates, but this code states how SharePoint internally will manage them.
  <img src="./image-5.png" alt="SPClientRenderer.RenderCore (renderCtx):"></li>
<li><code>SPClientTemplates</code>: In the same way that SPClientRenderer all Render core functions, this “class” defines all the variables and functions needed to implement the Template framework that we will be able to override with our custom applications. Let’s see few Important methods and functions:</li>
<li><code>SPClientTemplates.TemplateManager</code>: keep the <code>TemplateOverrides</code> functions depending on <code>ViewStyle</code>, <code>ListTemplateType</code> and <code>BaseViewID</code>. And also provides <code>SPClientTemplates.TemplateManager.RegisterTemplateOverrides</code> public function that allows CSR customizations. We will see later on this post how it works.</li>
</ul>
<h2 id="Overriding-CSR-Templates"><a href="#Overriding-CSR-Templates" class="headerlink" title="Overriding CSR Templates"></a>Overriding CSR Templates</h2><p>Now, we are happy to investigate deeply clienttemplates functions, let’s analyze <code>SPClientTemplates.TemplateManager.RegisterTemplateOverrides</code>  in detail:
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SPClientTemplates.TemplateManager.RegisterTemplateOverrides = <span class="function"><span class="keyword">function</span> (<span class="params">renderCtx</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!renderCtx || !renderCtx.Templates &amp;&amp; !renderCtx.OnPreRender &amp;&amp; !renderCtx.OnPostRender)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">var</span> tempStruct = SPClientTemplates.TemplateManager._TemplateOverrides;</span><br><span class="line"></span><br><span class="line">    SPClientTemplates.TemplateManager._RegisterTemplatesInternal(renderCtx, tempStruct);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>First of all, the parameter <code>renderCtx</code> is a <code>RenderContext</code> object. That is a dynamic object available at render time and includes some reserved properties.</p>
<h3 id="RenderContext-object"><a href="#RenderContext-object" class="headerlink" title="RenderContext object"></a>RenderContext object</h3><p><code>RenderObject</code> is passed as a parameter in almost all functions included in <strong>clienttemplates.js</strong>. It is a <strong>dynamic object</strong> composed of lot of dynamic properties, but the most important ones are: <code>BaseViewId</code>, <code>ListTemplateType</code>, <code>OnPreRender</code>, <code>OnPostRender</code> and <code>Templates</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> renderContext = &#123;</span><br><span class="line">  BaseViewID: <span class="comment">/* ID specified in Schema.xml see more info http://sharepoint.stackexchange.com/questions/28349/how-can-i-use-normal-paging-on-a-custom-view/28538#28538 */</span>,  </span><br><span class="line">  ListTemplateType: <span class="comment">/* List Template ID to target see https://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.listtemplatetype?f=255&amp;MSPPError=-2147217396 */</span>,  </span><br><span class="line">  ViewStyle: <span class="comment">/* classic View Style: Boxed, no labels (12), Boxed (13), Newsletter (15), etc. */</span>,</span><br><span class="line">  OnPreRender: <span class="comment">/* function or array of functions */</span>,</span><br><span class="line">  Templates: &#123;</span><br><span class="line">    View: <span class="comment">/* function or string */</span>,</span><br><span class="line">    Body: <span class="comment">/* function or string */</span>,</span><br><span class="line">    Header: <span class="comment">/* function or string */</span>,</span><br><span class="line">    Footer: <span class="comment">/* function or string */</span>,</span><br><span class="line">    Group: <span class="comment">/* function or string */</span>,</span><br><span class="line">    Item: <span class="comment">/* function or string */</span>,</span><br><span class="line">    Fields: &#123;</span><br><span class="line">      <span class="string">'Field1 Internal Name'</span>: &#123;</span><br><span class="line">          View: <span class="comment">/* function or string */</span>,</span><br><span class="line">          EditForm: <span class="comment">/* function or string */</span>,</span><br><span class="line">          DisplayForm: <span class="comment">/* function or string */</span>,</span><br><span class="line">          NewForm: <span class="comment">/* function or string */</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">'Field2 Internal Name'</span>: &#123;</span><br><span class="line">          View: <span class="comment">/* function or string */</span>,</span><br><span class="line">          EditForm: <span class="comment">/* function or string */</span>,</span><br><span class="line">          DisplayForm: <span class="comment">/* function or string */</span>,</span><br><span class="line">          NewForm: <span class="comment">/* function or string */</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  OnPostRender: <span class="comment">/* function or array of functions */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Once we know how is build the parameter object, let’s <strong>debug RegisterTemplateOverride</strong> function by using JS Debugger (F12).</p>
<p><img src="./image-6.png" alt="RegisterTemplateOverride "></p>
<p>If there isn’t <code>renderContext</code> neither <code>Templates</code>, <code>OnPreRender</code> or <code>OnPostRender</code> customizations the function return nothing. So, do nothing.</p>
<p>After that is called an internal function called <code>SPClientTemplates.TemplateManager._TemplateOverrides</code> that gets current Template overrides that were previously done. You can see how Templates object returned by this function is organized following this structure:</p>
<p><strong>Template Scope</strong> (Body, Fields, Footer, …)
<strong>ViewStyle</strong> (default in this case)
<strong>ListTemplateType</strong> (109 in this case)
<strong>BaseViewID</strong> (2 in this case)
<strong>Function</strong></p>
<p><img src="./image-7.png" alt="Templates, OnPreRender or OnPostRender "></p>
<p><img src="./image-8.png" alt="_RegisterTemplatesInternal"></p>
<p>After that, is called <code>_RegisterTemplatesInternal</code> function that does a <strong>merge</strong> between current applied Templates and our custom template.</p>
<p>This is the function:
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">SPClientTemplates.TemplateManager._RegisterTemplatesInternal = <span class="function"><span class="keyword">function</span>(<span class="params">renderCtx, registeredOverrides</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!renderCtx || !registeredOverrides || !renderCtx.Templates &amp;&amp; !renderCtx.OnPreRender &amp;&amp; !renderCtx.OnPostRender)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">var</span> tmps = renderCtx.Templates != <span class="literal">null</span> ? renderCtx.Templates : &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> typeInfo = SPClientTemplates.Utility.ComputeRegisterTypeInfo(renderCtx);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> renderCtx.OnPreRender != <span class="string">"undefined"</span>)</span><br><span class="line">        tmps[<span class="string">'OnPreRender'</span>] = renderCtx.OnPreRender;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> renderCtx.OnPostRender != <span class="string">"undefined"</span>)</span><br><span class="line">        tmps[<span class="string">'OnPostRender'</span>] = renderCtx.OnPostRender;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> tmplName <span class="keyword">in</span> tmps) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (tmplName) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Group'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Item'</span>:</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> tmps[tmplName] == <span class="string">"function"</span> || <span class="keyword">typeof</span> tmps[tmplName] == <span class="string">"string"</span>)</span><br><span class="line">                tmps[tmplName] = &#123;</span><br><span class="line">                    <span class="string">"__DefaultTemplate__"</span>: tmps[tmplName]</span><br><span class="line">                &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'View'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Header'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Body'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Footer'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Fields'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'OnPreRender'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'OnPostRender'</span>:</span><br><span class="line">            <span class="keyword">var</span> bCallbackTag = tmplName == <span class="string">'OnPreRender'</span> || tmplName == <span class="string">'OnPostRender'</span>;</span><br><span class="line">            <span class="keyword">var</span> bSingleTpl = tmplName == <span class="string">'View'</span> || tmplName == <span class="string">'Header'</span> || tmplName == <span class="string">'Body'</span> || tmplName == <span class="string">'Footer'</span>;</span><br><span class="line">            <span class="keyword">var</span> bSetTpl = tmplName == <span class="string">'Item'</span> || tmplName == <span class="string">'Group'</span> || tmplName == <span class="string">'Fields'</span>;</span><br><span class="line">            <span class="keyword">var</span> viewStyleTpls, listTpls;</span><br><span class="line">            <span class="keyword">var</span> tpls = registeredOverrides[tmplName];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (typeInfo.defaultViewStyle) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!tpls[<span class="string">'default'</span>])</span><br><span class="line">                    tpls[<span class="string">'default'</span>] = &#123;&#125;;</span><br><span class="line">                viewStyleTpls = tpls[<span class="string">'default'</span>];</span><br><span class="line">                HandleListTemplates();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> vsIdx = <span class="number">0</span>; vsIdx &lt; typeInfo.viewStyle.length; vsIdx++) &#123;</span><br><span class="line">                    <span class="keyword">var</span> viewStyleKey = typeInfo.viewStyle[vsIdx];</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (!tpls[viewStyleKey])</span><br><span class="line">                        tpls[viewStyleKey] = &#123;&#125;;</span><br><span class="line">                    viewStyleTpls = tpls[viewStyleKey];</span><br><span class="line">                    HandleListTemplates();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">HandleListTemplates</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (typeInfo.allLists) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!viewStyleTpls[<span class="string">'all'</span>])</span><br><span class="line">                viewStyleTpls[<span class="string">'all'</span>] = &#123;&#125;;</span><br><span class="line">            listTpls = viewStyleTpls[<span class="string">'all'</span>];</span><br><span class="line">            <span class="keyword">if</span> (bSingleTpl || bSetTpl)</span><br><span class="line">                HandleTemplateRegistration();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                HandleCallbackRegistration();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> ltIdx = <span class="number">0</span>; ltIdx &lt; typeInfo.ltype.length; ltIdx++) &#123;</span><br><span class="line">                <span class="keyword">var</span> ltypeKey = typeInfo.ltype[ltIdx];</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!viewStyleTpls[ltypeKey])</span><br><span class="line">                    viewStyleTpls[ltypeKey] = &#123;&#125;;</span><br><span class="line">                listTpls = viewStyleTpls[ltypeKey];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (bSingleTpl || bSetTpl)</span><br><span class="line">                HandleTemplateRegistration();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                HandleCallbackRegistration();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">HandleTemplateRegistration</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> viewSet = typeInfo.allViews ? listTpls[<span class="string">'all'</span>] : listTpls[typeInfo.viewId];</span><br><span class="line">        <span class="keyword">var</span> newTpls = tmps[tmplName];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (bSingleTpl) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> newTpls == <span class="string">"function"</span> || <span class="keyword">typeof</span> newTpls == <span class="string">"string"</span>)</span><br><span class="line">                viewSet = newTpls;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!viewSet)</span><br><span class="line">                viewSet = &#123;&#125;;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> t <span class="keyword">in</span> newTpls)</span><br><span class="line">                viewSet[t] = newTpls[t];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (typeInfo.allViews)</span><br><span class="line">            listTpls[<span class="string">'all'</span>] = viewSet;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            listTpls[typeInfo.viewId] = viewSet;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">HandleCallbackRegistration</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> newCallbacks = tmps[tmplName];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!newCallbacks)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">var</span> viewCallbacks = typeInfo.allViews ? listTpls[<span class="string">'all'</span>] : listTpls[typeInfo.viewId];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!viewCallbacks)</span><br><span class="line">            viewCallbacks = [];</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> newCallbacks == <span class="string">"function"</span>)</span><br><span class="line">            viewCallbacks.push(newCallbacks);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> newLen = newCallbacks.length;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> newLen == <span class="string">"number"</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> n = <span class="number">0</span>; n &lt; <span class="built_in">Number</span>(newLen); n++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> newCallbacks[n] == <span class="string">"function"</span>)</span><br><span class="line">                        viewCallbacks.push(newCallbacks[n]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (typeInfo.allViews)</span><br><span class="line">            listTpls[<span class="string">'all'</span>] = viewCallbacks;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            listTpls[typeInfo.viewId] = viewCallbacks;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>Imagine the scenario where we assign custom template to <code>ListTemplateType = 100</code>, with a custom Item function.</p>
<p>The parameters would be:</p>
<p><code>renderCtx</code>:</p>
<p><a href="./image-9.png"><img src="./image-9.png" alt="SharePoint renderCtx" title="SharePoint renderCtx"></a></p>
<p><code>registeredOverrides</code>:</p>
<p><img src="./image-10.png" alt="SharePoint registeredOverrides"></p>
<p>And, <strong>after <code>applying _RegisterTemplateInternal</code></strong> that would be the <strong>registeredOverrides result</strong>:</p>
<p><img src="./image-11.png" alt="SharePoint registeredOverrides"></p>
<blockquote>
<p>Note that Item template have now two objects behind the default ViewStyle, one for 109 and other for 100 List Type.</p>
</blockquote>
<h2 id="SharePoint-OOTB-Template-Overrides"><a href="#SharePoint-OOTB-Template-Overrides" class="headerlink" title="SharePoint OOTB Template Overrides"></a>SharePoint OOTB Template Overrides</h2><p>CSR is a framework, but is not only used by developers to create custom view, it is also used for SharePoint itself in order to create custom views for different list types, for example if we take a look into SharePoint OOTB JS files we can see how the function RegisterTemplateOverrides is used in 20 files:</p>
<p><img src="./image-12.jpg" alt="image"></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>I really like this kind of investigations because helps me to understand completely a product or new feature. After this investigation I’d like to remark:</p>
<ul>
<li><strong>Client Side Rendering / CSR</strong> is a <strong>rendering framework</strong> and <strong>JSLink</strong> is a way to attach a JavaScript file to a SharePoint Object.</li>
<li>We <strong>could use CSR without using JSLink</strong>, just calling <strong>RegisterTemplateOverrides</strong> function from a <strong>Script Editor</strong> for instance.</li>
<li>With <strong>CSR is possible</strong> to implement <strong>different customizations</strong> to the same view and list in <strong>different SharePoint pages</strong>.</li>
<li>We <strong>can NOT use CSR to apply two different customizations for the same view and list in the same SharePoint page</strong>. For example, we have custom list (100) and we want apply different presentations for the allItems view in the same page. That could not be possible because it is only one function associate with one ListTemplateType and BaseViewID. <strong>There are different ways to workarround this one, I will post about that.
</strong> - Keep in mind that when you use <strong>multiple instances of a list view Web Part </strong>on the <strong>same page </strong>and apply <strong>CSR</strong> to one of the instances, the layout of all other list view Web Parts changes also, because internally SharePoint uses common rendering logic. Source: <a href="https://msdn.microsoft.com/en-us/magazine/dn745867.aspx" target="_blank" rel="noopener">https://msdn.microsoft.com/en-us/magazine/dn745867.aspx</a>.</li>
<li>I have never tried, <strong>but seems to be possible overrides different ViewStyles inside the same ListTemaplateType and BaseViewID</strong>. That could provide us flexibility in some scenarios.</li>
</ul>
<p>Of course, this is my interpretation of the code, please if you have different one, don’t hesitate on write a comment!</p>
</div><div id="post-content-bottom-space"><p>&nbsp;</p></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://twitter.com/jquintozamora" target="_blank">José Quinto</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/">https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/category/SharePoint-2013/">SharePoint 2013</a><a class="post-meta__tags" href="/category/client-side-rendering/">client side rendering</a><a class="post-meta__tags" href="/category/JSLink/">JSLink</a><a class="post-meta__tags" href="/category/Office-365/">Office 365</a><a class="post-meta__tags" href="/category/CSR/">CSR</a></div></article><nav id="pagination"><div class="prev-post pull-left"><a href="/2016/01/26/sharepoint-online-powershell-problem-cannot-convert-the-microsoft-sharepoint-client-clientcontext/" title="previous page"><i class="fa fa-chevron-left" aria-hidden="true"></i><span>SharePoint Online PowerShell problem: Cannot convert the `Microsoft.SharePoint.Client.ClientContext`</span></a></div><div class="next-post pull-right"><a href="/2015/12/17/caml-query-to-filter-lookup-field-by-id-using-jsom-in-office-365-sharepoint-2013/" title="next page"><span>CAML Query to Filter Lookup Field by Id using JSOM in Office 365 / SharePoint 2013</span><i class="fa fa-chevron-right" aria-hidden="true"></i></a></div></nav><div id="disqus_thread"></div><script>var disqus_config = function () {
  this.page.url = 'https://blog.josequinto.com/2016/01/14/sharepoint-2013-client-side-rendering-register-templates-overrides-in-detail/';
  this.page.identifier = '590';
  this.page.title = 'SharePoint 2013 Client Side Rendering: Register Templates Overrides in Detail';
}
var d = document, s = d.createElement('script');
s.src = "https://https-blog-josequinto-com.disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-src" src="//https-blog-josequinto-com.disqus.com/count.js" async></script></section></section></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2022 By José Quinto</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i></div><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.1"></script><script src="/js/fancybox.js?version=1.5.1"></script><script src="/js/copy.js?version=1.5.1"></script><script src="/js/scroll.js?version=1.5.1"></script><script src="/js/head.js?version=1.5.1"></script><script src="/js/search/algolia.js"></script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-44570510-1', 'auto');
ga('send', 'pageview');</script><script async src="https://www.google-analytics.com/analytics.js"></script><link rel="manifest" href="/manifest.json"><script async src="/js/registerServiceWorker.js"></script></body></html>